(function(){this.metal=this.metal||{},this.metalNamed=this.metalNamed||{};var t={};t["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},t.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},t.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},t.slicedToArray=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(a){o=!0,i=a}finally{try{!n&&u["return"]&&u["return"]()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.abstractMethod=function(){throw Error("Unimplemented abstract method")},e.collectSuperClassesProperty=function(t,e){for(var r=[t[e]];t.__proto__&&!t.__proto__.isPrototypeOf(Function);)t=t.__proto__,r.push(t[e]);return r},e.getFunctionName=function(t){if(!t.name){var e=t.toString();t.name=e.substring(9,e.indexOf("("))}return t.name},e.getUid=function(t){return t?t[e.UID_PROPERTY]||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++):e.uniqueIdCounter_++},e.identityFunction=function(t){return t},e.isBoolean=function(t){return"boolean"==typeof t},e.isDef=function(t){return void 0!==t},e.isDefAndNotNull=function(t){return e.isDef(t)&&!e.isNull(t)},e.isDocument=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&9===e.nodeType},e.isElement=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&1===e.nodeType},e.isFunction=function(t){return"function"==typeof t},e.isNull=function(t){return null===t},e.isNumber=function(t){return"number"==typeof t},e.isWindow=function(t){return null!==t&&t===t.window},e.isObject=function(e){var r="undefined"==typeof e?"undefined":t["typeof"](e);return"object"===r&&null!==e||"function"===r},e.isPromise=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&"function"==typeof e.then},e.isString=function(t){return"string"==typeof t},e.mergeSuperClassesProperty=function(t,r,n){var o=r+"_MERGED";if(t.hasOwnProperty(o))return!1;var i=e.collectSuperClassesProperty(t,r);return n&&(i=n(i)),t[o]=i,!0},e.nullFunction=function(){},e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.metal.core=e}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e),this.disposed_=!1}return e.prototype.dispose=function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)},e.prototype.disposeInternal=function(){},e.prototype.isDisposed=function(){return this.disposed_},e}();this.metal.Disposable=e}.call(this),function(){var e=this.metal.Disposable,r=function(e){function r(){t.classCallCheck(this,r);var n=t.possibleConstructorReturn(this,e.call(this));return n.keys={},n.values={},n}return t.inherits(r,e),r.prototype.add=function(t,e){return this.keys[t.toLowerCase()]=t,this.values[t.toLowerCase()]=this.values[t.toLowerCase()]||[],this.values[t.toLowerCase()].push(e),this},r.prototype.clear=function(){return this.keys={},this.values={},this},r.prototype.contains=function(t){return t.toLowerCase()in this.values},r.prototype.disposeInternal=function(){this.values=null},r.prototype.get=function(t){var e=this.values[t.toLowerCase()];return e?e[0]:void 0},r.prototype.getAll=function(t){return this.values[t.toLowerCase()]},r.prototype.isEmpty=function(){return 0===this.size()},r.prototype.names=function(){var t=this;return Object.keys(this.values).map(function(e){return t.keys[e]})},r.prototype.remove=function(t){return delete this.keys[t.toLowerCase()],delete this.values[t.toLowerCase()],this},r.prototype.set=function(t,e){return this.keys[t.toLowerCase()]=t,this.values[t.toLowerCase()]=[e],this},r.prototype.size=function(){return this.names().length},r.prototype.toString=function(){return JSON.stringify(this.values)},r}(e);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"MultiMap"),this.metal.MultiMap=r}.call(this),function(){var e=this.metal.core,r=this.metal.MultiMap,n=function(){function n(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];t.classCallCheck(this,n),this.url=new URL(this.maybeAddProtocolAndHostname_(e))}return n.prototype.addParametersFromMultiMap=function(t){var e=this;return t.names().forEach(function(r){t.getAll(r).forEach(function(t){e.addParameterValue(r,t)})}),this},n.prototype.addParameterValue=function(t,r){return this.ensureQueryInitialized_(),e.isDef(r)&&(r=String(r)),this.query.add(t,r),this},n.prototype.addParameterValues=function(t,e){var r=this;return e.forEach(function(e){return r.addParameterValue(t,e)}),this},n.prototype.ensureQueryInitialized_=function(){var n=this;if(!this.query){this.query=new r;var o=this.url.search;o&&o.substring(1).split("&").forEach(function(r){var o=r.split("="),i=t.slicedToArray(o,2),s=i[0],u=i[1];e.isDef(u)&&(u=decodeURIComponent(u)),n.addParameterValue(s,u)})}},n.prototype.getHash=function(){return this.url.hash},n.prototype.getHost=function(){var t=this.getHostname();if(t){var e=this.getPort();e&&(t+=":"+e)}return t},n.prototype.getHostname=function(){var t=this.url.hostname;return t===n.HOSTNAME_PLACEHOLDER?"":t},n.prototype.getOrigin=function(){var t=this.getHost();return t?this.getProtocol()+"//"+t:""},n.prototype.getParameterValue=function(t){return this.ensureQueryInitialized_(),this.query.get(t)},n.prototype.getParameterValues=function(t){return this.ensureQueryInitialized_(),this.query.getAll(t)},n.prototype.getParameterNames=function(){return this.ensureQueryInitialized_(),this.query.names()},n.prototype.getPassword=function(){return this.url.password},n.prototype.getPathname=function(){return this.url.pathname},n.prototype.getPort=function(){return this.url.port},n.prototype.getProtocol=function(){return this.url.protocol},n.prototype.getSearch=function(){var t=this,r="",n="";return this.getParameterNames().forEach(function(r){t.getParameterValues(r).forEach(function(t){n+=r,e.isDef(t)&&(n+="="+encodeURIComponent(t)),n+="&"})}),n=n.slice(0,-1),n&&(r+="?"+n),r},n.prototype.getUsername=function(){return this.url.username},n.prototype.maybeAddProtocolAndHostname_=function(t){var e=t;if(-1===t.indexOf("://"))switch(e=n.DEFAULT_PROTOCOL+"//",t.charAt(0)){case".":case"?":case"#":e+=n.HOSTNAME_PLACEHOLDER,e+="/",e+=t;break;case"":case"/":e+=n.HOSTNAME_PLACEHOLDER,e+=t;break;default:e+=t}return e},n.prototype.removeParameter=function(t){return this.ensureQueryInitialized_(),this.query.remove(t),this},n.prototype.setHash=function(t){return this.url.hash=t,this},n.prototype.setHostname=function(t){return this.url.hostname=t,this},n.prototype.setParameterValue=function(t,e){return this.removeParameter(t),this.addParameterValue(t,e),this},n.prototype.setParameterValues=function(t,e){var r=this;return this.removeParameter(t),e.forEach(function(e){return r.addParameterValue(t,e)}),this},n.prototype.setPassword=function(t){return this.url.password=t,this},n.prototype.setPathname=function(t){return this.url.pathname=t,this},n.prototype.setPort=function(t){return this.url.port=t,this},n.prototype.setProtocol=function(t){return this.url.protocol=t,this},n.prototype.setUsername=function(t){return this.url.username=t,this},n.prototype.toString=function(){var t="",e=this.getHost();if(e){t+=this.getProtocol()+"//";var r=this.getUsername(),n=this.getPassword();r&&n&&(t+=r+":"+n+"@")}return t+=e+this.getPathname()+this.getSearch()+this.getHash()},n.joinPaths=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];return"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),r=r.map(function(t){return"/"===t.charAt(0)?t.substring(1):t}),[t].concat(r).join("/").replace(/\/$/,"")},n}();n.DEFAULT_PROTOCOL="http:",n.HOSTNAME_PLACEHOLDER="hostname"+Date.now(),this.metal.Uri=n}.call(this)}).call(this);