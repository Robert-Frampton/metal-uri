(function(){this.metal=this.metal||{},this.metalNamed=this.metalNamed||{};var t={};t["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},t.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},t.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},t.slicedToArray=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.abstractMethod=function(){throw Error("Unimplemented abstract method")},e.collectSuperClassesProperty=function(t,e){for(var n=[t[e]];t.__proto__&&!t.__proto__.isPrototypeOf(Function);)t=t.__proto__,n.push(t[e]);return n},e.getFunctionName=function(t){if(!t.name){var e=t.toString();t.name=e.substring(9,e.indexOf("("))}return t.name},e.getUid=function(t){return t?t[e.UID_PROPERTY]||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++):e.uniqueIdCounter_++},e.identityFunction=function(t){return t},e.isBoolean=function(t){return"boolean"==typeof t},e.isDef=function(t){return void 0!==t},e.isDefAndNotNull=function(t){return e.isDef(t)&&!e.isNull(t)},e.isDocument=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&9===e.nodeType},e.isElement=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&1===e.nodeType},e.isFunction=function(t){return"function"==typeof t},e.isNull=function(t){return null===t},e.isNumber=function(t){return"number"==typeof t},e.isWindow=function(t){return null!==t&&t===t.window},e.isObject=function(e){var n="undefined"==typeof e?"undefined":t["typeof"](e);return"object"===n&&null!==e||"function"===n},e.isPromise=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&"function"==typeof e.then},e.isString=function(t){return"string"==typeof t},e.mergeSuperClassesProperty=function(t,n,r){var o=n+"_MERGED";if(t.hasOwnProperty(o))return!1;var i=e.collectSuperClassesProperty(t,n);return r&&(i=r(i)),t[o]=i,!0},e.nullFunction=function(){},e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.metal.core=e}.call(this),function(){var e=this.metal.core,n=function(){function n(){t.classCallCheck(this,n)}return n.equal=function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return t.length===e.length},n.firstDefinedValue=function(t){for(var e=0;e<t.length;e++)if(void 0!==t[e])return t[e]},n.flatten=function(t,e){for(var r=e||[],o=0;o<t.length;o++)Array.isArray(t[o])?n.flatten(t[o],r):r.push(t[o]);return r},n.remove=function(t,e){var r,o=t.indexOf(e);return(r=o>=0)&&n.removeAt(t,o),r},n.removeAt=function(t,e){return 1===Array.prototype.splice.call(t,e,1).length},n.slice=function(t,n,r){for(var o=[],i=e.isDef(r)?r:t.length,a=n;i>a;a++)o.push(t[a]);return o},n}();this.metal.array=n}.call(this),function(){var t={};t.throwException=function(e){t.nextTick(function(){throw e})},t.run=function(e,n){t.run.workQueueScheduled_||(t.nextTick(t.run.processWorkQueue),t.run.workQueueScheduled_=!0),t.run.workQueue_.push(new t.run.WorkItem_(e,n))},t.run.workQueueScheduled_=!1,t.run.workQueue_=[],t.run.processWorkQueue=function(){for(;t.run.workQueue_.length;){var e=t.run.workQueue_;t.run.workQueue_=[];for(var n=0;n<e.length;n++){var r=e[n];try{r.fn.call(r.scope)}catch(o){t.throwException(o)}}}t.run.workQueueScheduled_=!1},t.run.WorkItem_=function(t,e){this.fn=t,this.scope=e},t.nextTick=function(e,n){var r=e;return n&&(r=e.bind(n)),r=t.nextTick.wrapCallback_(r),"function"==typeof setImmediate?void setImmediate(r):(t.nextTick.setImmediate_||(t.nextTick.setImmediate_=t.nextTick.getSetImmediateEmulator_()),void t.nextTick.setImmediate_(r))},t.nextTick.setImmediate_=null,t.nextTick.getSetImmediateEmulator_=function(){var t;if("function"==typeof MessageChannel&&(t=MessageChannel),"undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(t=function(){var t=document.createElement("iframe");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow,n=e.document;n.open(),n.write(""),n.close();var r="callImmediate"+Math.random(),o=e.location.protocol+"//"+e.location.host,i=function(t){(t.origin===o||t.data===r)&&this.port1.onmessage()}.bind(this);e.addEventListener("message",i,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(r,o)}}}),"undefined"!=typeof t){var e=new t,n={},r=n;return e.port1.onmessage=function(){n=n.next;var t=n.cb;n.cb=null,t()},function(t){r.next={cb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(t){var e=document.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){setTimeout(t,0)}},t.nextTick.wrapCallback_=function(t){return t},this.metal.async=t}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e),this.disposed_=!1}return e.prototype.dispose=function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)},e.prototype.disposeInternal=function(){},e.prototype.isDisposed=function(){return this.disposed_},e}();this.metal.Disposable=e}.call(this),function(){var e=this.metal.core,n=function(){function n(){t.classCallCheck(this,n)}return n.mixin=function(t){for(var e,n,r=1;r<arguments.length;r++){n=arguments[r];for(e in n)t[e]=n[e]}return t},n.getObjectByName=function(t,n){for(var r,o=t.split("."),i=n||window;r=o.shift();){if(!e.isDefAndNotNull(i[r]))return null;i=i[r]}return i},n.map=function(t,e){for(var n={},r=Object.keys(t),o=0;o<r.length;o++)n[r[o]]=e(r[o],t[r[o]]);return n},n}();this.metal.object=n}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},e.getRandomString=function(){var t=2147483648;return Math.floor(Math.random()*t).toString(36)+Math.abs(Math.floor(Math.random()*t)^Date.now()).toString(36)},e.hashCode=function(t){for(var e=0,n=0,r=t.length;r>n;n++)e=31*e+t.charCodeAt(n),e%=4294967296;return e},e.replaceInterval=function(t,e,n,r){return t.substring(0,e)+r+t.substring(n)},e}();this.metal.string=e}.call(this),function(){var t=this.metal.core,e=this.metal.array,n=this.metal.async,r=this.metal.Disposable,o=this.metal.object,i=this.metal.string;this.metal.metal=t,this.metalNamed.metal={},this.metalNamed.metal.core=t,this.metalNamed.metal.array=e,this.metalNamed.metal.async=n,this.metalNamed.metal.Disposable=r,this.metalNamed.metal.object=o,this.metalNamed.metal.string=i}.call(this),function(){function t(t){var e=document.createElement("a");return e.href=t,{hash:e.hash,hostname:e.hostname,password:e.password,pathname:"/"===e.pathname[0]?e.pathname:"/"+e.pathname,port:e.port,protocol:e.protocol,search:e.search,username:e.username}}this.metal.parseFromAnchor=t}.call(this),function(){function t(t){return e.isFunction(URL)&&URL.length?new URL(t):n(t)}var e=this.metalNamed.metal.core,n=this.metal.parseFromAnchor;this.metal.parse=t}.call(this),function(){var e=this.metalNamed.metal.Disposable,n=function(e){function n(){t.classCallCheck(this,n);var r=t.possibleConstructorReturn(this,e.call(this));return r.keys={},r.values={},r}return t.inherits(n,e),n.prototype.add=function(t,e){return this.keys[t.toLowerCase()]=t,this.values[t.toLowerCase()]=this.values[t.toLowerCase()]||[],this.values[t.toLowerCase()].push(e),this},n.prototype.clear=function(){return this.keys={},this.values={},this},n.prototype.contains=function(t){return t.toLowerCase()in this.values},n.prototype.disposeInternal=function(){this.values=null},n.prototype.get=function(t){var e=this.values[t.toLowerCase()];return e?e[0]:void 0},n.prototype.getAll=function(t){return this.values[t.toLowerCase()]},n.prototype.isEmpty=function(){return 0===this.size()},n.prototype.names=function(){var t=this;return Object.keys(this.values).map(function(e){return t.keys[e]})},n.prototype.remove=function(t){return delete this.keys[t.toLowerCase()],delete this.values[t.toLowerCase()],this},n.prototype.set=function(t,e){return this.keys[t.toLowerCase()]=t,this.values[t.toLowerCase()]=[e],this},n.prototype.size=function(){return this.names().length},n.prototype.toString=function(){return JSON.stringify(this.values)},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"MultiMap"),this.metal.MultiMap=n}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.string,r=this.metal.parse,o=this.metal.MultiMap,i=r,a=function(){function r(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];t.classCallCheck(this,r),this.url=r.parse(this.maybeAddProtocolAndHostname_(e))}return r.prototype.addParametersFromMultiMap=function(t){var e=this;return t.names().forEach(function(n){t.getAll(n).forEach(function(t){e.addParameterValue(n,t)})}),this},r.prototype.addParameterValue=function(t,n){return this.ensureQueryInitialized_(),e.isDef(n)&&(n=String(n)),this.query.add(t,n),this},r.prototype.addParameterValues=function(t,e){var n=this;return e.forEach(function(e){return n.addParameterValue(t,e)}),this},r.prototype.ensureQueryInitialized_=function(){var n=this;if(!this.query){this.query=new o;var i=this.url.search;i&&i.substring(1).split("&").forEach(function(o){var i=o.split("="),a=t.slicedToArray(i,2),s=a[0],u=a[1];e.isDef(u)&&(u=r.urlDecode(u)),n.addParameterValue(s,u)})}},r.prototype.getHash=function(){return this.url.hash||""},r.prototype.getHost=function(){var t=this.getHostname();if(t){var e=this.getPort();e&&"80"!==e&&(t+=":"+e)}return t},r.prototype.getHostname=function(){var t=this.url.hostname;return t===r.HOSTNAME_PLACEHOLDER?"":t},r.prototype.getOrigin=function(){var t=this.getHost();return t?this.getProtocol()+"//"+t:""},r.prototype.getParameterValue=function(t){return this.ensureQueryInitialized_(),this.query.get(t)},r.prototype.getParameterValues=function(t){return this.ensureQueryInitialized_(),this.query.getAll(t)},r.prototype.getParameterNames=function(){return this.ensureQueryInitialized_(),this.query.names()},r.getParseFn=function(){return i},r.prototype.getPathname=function(){return this.url.pathname},r.prototype.getPort=function(){return this.url.port},r.prototype.getProtocol=function(){return this.url.protocol},r.prototype.getSearch=function(){var t=this,n="",r="";return this.getParameterNames().forEach(function(n){t.getParameterValues(n).forEach(function(t){r+=n,e.isDef(t)&&(r+="="+encodeURIComponent(t)),r+="&"})}),r=r.slice(0,-1),r&&(n+="?"+r),n},r.prototype.hasParameter=function(t){return this.ensureQueryInitialized_(),this.query.contains(t)},r.prototype.makeUnique=function(){return this.setParameterValue(r.RANDOM_PARAM,n.getRandomString()),this},r.prototype.maybeAddProtocolAndHostname_=function(t){var e=t;if(-1===t.indexOf("://")&&0!==t.indexOf("javascript:"))switch(e=r.DEFAULT_PROTOCOL,("/"!==t[0]||"/"!==t[1])&&(e+="//"),t.charAt(0)){case".":case"?":case"#":e+=r.HOSTNAME_PLACEHOLDER,e+="/",e+=t;break;case"":case"/":"/"!==t[1]&&(e+=r.HOSTNAME_PLACEHOLDER),e+=t;break;default:e+=t}return e},r.normalizeObject=function(t){var e=t.pathname?t.pathname.length:0;return e>1&&"/"===t.pathname[e-1]&&(t.pathname=t.pathname.substr(0,e-1)),t},r.parse=function(t){return r.normalizeObject(i(t))},r.prototype.removeParameter=function(t){return this.ensureQueryInitialized_(),this.query.remove(t),this},r.prototype.removeUnique=function(){return this.removeParameter(r.RANDOM_PARAM),this},r.prototype.setHash=function(t){return this.url.hash=t,this},r.prototype.setHostname=function(t){return this.url.hostname=t,this},r.prototype.setParameterValue=function(t,e){return this.removeParameter(t),this.addParameterValue(t,e),this},r.prototype.setParameterValues=function(t,e){var n=this;return this.removeParameter(t),e.forEach(function(e){return n.addParameterValue(t,e)}),this},r.prototype.setPathname=function(t){return this.url.pathname=t,this},r.prototype.setPort=function(t){return this.url.port=t,this},r.setParseFn=function(t){i=t},r.prototype.setProtocol=function(t){return this.url.protocol=t,":"!==this.url.protocol[this.url.protocol.length-1]&&(this.url.protocol+=":"),this},r.prototype.toString=function(){var t="",e=this.getHost();return e&&(t+=this.getProtocol()+"//"),t+=e+this.getPathname()+this.getSearch()+this.getHash()},r.joinPaths=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),n=n.map(function(t){return"/"===t.charAt(0)?t.substring(1):t}),[t].concat(n).join("/").replace(/\/$/,"")},r.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},r}();a.DEFAULT_PROTOCOL="http:",a.HOSTNAME_PLACEHOLDER="hostname"+Date.now(),a.RANDOM_PARAM="zx",this.metal.Uri=a}.call(this)}).call(this);